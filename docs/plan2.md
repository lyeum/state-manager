📋 DML 생성 및 디렉토리 매핑 계획안
1. 개요
목적: 정의된 DDL(FIRST/BASE)에 따라 실제 게임 데이터 흐름(DML)을 구축

핵심 원칙:

식별자 체계: 모든 이력 및 로그 추적 시 turn_id 및 phase_id 체계 적용

턴 제어: 상태 변화 시 record_state_change 함수를 통한 턴 카운팅 강제

데이터 격리: START_by_session 단계에서 각 세션 인스턴스 데이터의 완전한 격리

2. 단계별 DML 매핑 상세
1️⃣ START_by_session/ (세션 초기화)
매핑 위치: START_by_session/

작업 내용:

신규 세션 레코드 삽입을 통한 플레이어 및 초기 턴/페이즈 자동 생성 유도

마스터 데이터를 세션 ID 기반의 NPC/Enemy 인스턴스로 복제

플레이어 인벤토리 및 초기 관계(Edge) 데이터 초기화

2️⃣ INQUIRY/ (조회)
매핑 위치: INQUIRY/

작업 내용:

세션의 현재 턴, 페이즈, 플레이어 상태 및 인벤토리 종합 조회

플레이어 및 NPC의 상세 스탯과 호감도 관계 조회

현재 위치 및 활성화된 적 목록 상태 확인

3️⃣ TRACE/ (히스토리 추적)
매핑 위치: TRACE/

작업 내용:

turn_id 기반의 세션별 상태 변화 이력 타임라인 조회

phase_id 기반의 페이즈 전환 이력 및 구간별 분석

4️⃣ UPDATE/ (상태 업데이트)
매핑 위치: UPDATE/

작업 내용:

플레이어/NPC/Enemy 수치 변경 시 record_state_change 함수 연동

아이템 획득 및 사용에 따른 인벤토리 갱신 처리

페이즈별(전투, 탐색 등) 행동 처리에 따른 복합 상태 업데이트 트랜잭션

5️⃣ MANAGE/ (내부 관리)
매핑 위치: MANAGE/

작업 내용:

세션 생명주기(일시정지, 재개, 종료) 및 상태 제어

페이즈 강제 전환 및 행동 허용 범위 검증

엔티티(Enemy, NPC)의 동적 생성(Spawn) 및 제거 관리

6️⃣ DEBUG/ (디버깅 및 통계)
매핑 위치: DEBUG/

작업 내용:

세션 전체 엔티티 상태 덤프 및 데이터 무결성 검증

턴/페이즈 이력 데이터의 논리적 오류 디버깅